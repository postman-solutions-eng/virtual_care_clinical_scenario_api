---
openapi: 3.0.3
info:
  title: "Clinical Scenario: Capturing Data with Forms"
  description: "# Clinical Relevance\nCollecting data is often the first step of any medical visit. The various forms, documents, and questionnaires needed by a clinic may differ based on their needs, but will always exist as an initial and crucial point of contact. Whether it’s insurance paperwork or a patient history questionnaire, quick and easy access to patient information is the backbone of expedient care.\n\n# Objective of this Collection\nWe’ll explore FHIR’s mechanism for describing clinical forms, the [Questionnaire](http://hl7.org/fhir/R4/questionnaire.html) resource, and the additional capabilities enabled by Commure’s support for the [Structured Data Capture (SDC)](http://hl7.org/fhir/uv/sdc/2019May/) specification. The collection will demonstrate how to request forms to be partially-filled with answers from existing data and how new or updated information in a form can be turned into the appropriate FHIR resources.  \n\n# Scenario Summary\nIn this scenario, a provider will be filling out a digital form to capture a patient’s insurance information.  \n\nFirst, the provider uses a search interface to find the patient by name, then selects to start a new response to an insurance coverage form. The client application uses the extended operation [Questionnaire/$populate](http://hl7.org/fhir/uv/sdc/2019May/populate.html), which returns a partially-filled [QuestionnaireResponse](https://www.hl7.org/fhir/questionnaireresponse.html).  Once completed, the extended operation [QuestionnaireResponse/$extract](http://hl7.org/fhir/uv/sdc/2019May/extraction.html) is invoked for the completed form. This returns a new or updated [Coverage](https://www.hl7.org/fhir/coverage.html) resource that is submitted by the application, ensuring that the data is available in the expected record.\n\n# FHIR Concepts Covered\nFHIR offers a very effective set of resources and tools to work with questionnaires. The scenario presented here is a simplified example to introduce FHIR’s resources. We will interact with the following resources:  [Questionnaire](http://hl7.org/fhir/R4/questionnaire.html) (a specification of the content and behavior of a form; aka “form template”), [QuestionnaireResponse](https://www.hl7.org/fhir/questionnaireresponse.html) (answers to questions defined by a Questionnaire) \n\nAdditionally, this scenario provides an introduction to:\n* The extended operation `Questionnaire/$populate`, to pre-fill data into a form.\n* The extended operation  `QuestionnaireResponse/$extract`,  to create or update resources from answers to questions in a form.\n* Basic FHIR search queries to find a patient by name & retrieve associated records .\n\n# Quickstart\nTo navigate a scenario using the Postman collection you will need to\n1. Sign up [here](https://accounts.commure.com/signin/register) and accept Commure’s Terms and Conditions.\n2. Authenticate (To have more information about it read the [postman documentation](https://learning.postman.com/docs/sending-requests/authorization/#oauth-20), our [documentation](https://developer.commure.com/docs/apis/auth/introduction) or see our [authentication collection](https://documenter.getpostman.com/view/4955094/TVYAffgd)).\n3. Set up the initial FHIR data you need using the first request of the collection\n4. Go through the user journey performing each request in the collection\n\n# How to authenticate\nOnce you are signed up, there are two ways to authenticate with Commure’s Server:\n\n## Alternative A:\n\nClick the “View more actions” button of the Collection > Click “Edit” > Go to the variables tab and update only the tenant-id field (both initial value and current value) The tenant-id is the suffix on the baseurl when you sign in to the Commure’s Developer Platform. For example: in https://dashboard-99750511.developer.commure.com/smart/dashboard/ the tenant id is: 99750511. After updating this field please click “Update” at the bottom right corner of the window.  \n\nNow click again the “View more actions” button of the Collection > Click “Edit” > and this time, go to the authorization tab > select Oauth2 as the authorization method > Click “Get New Access Token” > Fill the fields with your tenant information.  \n\n> Remember to remove the blank space between the Curly braces `{ {tenant-id}}`\n\n\n  * Callback url: http://localhost:1234/callback. \n  * Auth url:  `https://api-{ {tenant-id}}.developer.commure.com/auth/authorize`\n  * Access Token url: `https://api-{ {tenant-id}}.developer.commure.com/auth/token`\n  * client-id: smart_hello_world\n  * Scope: openid email\n  * Leave Client Secret and State empty.\n\n  \nAfter filling in the details, please Click in “Request Token” > In the next window Click “Use Token” >Once that window closes please click “Update”\n\n## Alternative B:\n\nIn your browser go to the /auth endpoint, and get the authorization token, then use the token as a bearer in every request you want to make to our servers.\n\n> Note: If you get a 404 SSL error, you forgot to set the tenant-id variable on the collections variables, or you have a wrong base url.\n\n# About us\nCommure is building a system to accelerate healthcare software innovation. We believe that better software for doctors, nurses and patients - and ultimately for the healthcare system as a whole - will come from responsibly connecting the top minds in technology, medicine and design. Become part of our community and help us innovate the future of healthcare technology. Sign up  [here](https://accounts.commure.com/signin/register).\n\n# Disclaimer\nWhen using this collection you agree to Commure’s terms and conditions found [here](https://developer.commure.com/docs/legal/terms-of-use/).\n\n# Support\nIf you need help setting up, don’t hesitate to write us at dev-support@commure.com.\n\n# Collection"
  version: 1.0.0
  contact: {}
servers:
  - url: "{{url}}"
paths:
  /api/v1/r4/:
    post:
      summary: "1. Prerequisite data: a Questionnaire, Patient, and Organization"
      description: "The first request will create the resources needed to navigate this scenario: A `Questionnaire`, the `Patient` that will be the subject of our response to the `Questionnaire`, and an `Organization` that will be referenced as the patient’s insurance company.\n\nAlthough any resource can be identified and retrieved by id, for resources like `Questionnaire` that have a  URL field, it is preferable to identify the resource with the value of that field, known as the canonical URL. This is typical of resources that may be available and identifiable across many different environments.\n\nNote that the `Bundle` in this request makes use of the conditional update operation, which we recommend avoiding in production applications."
      operationId: 1PrerequisiteDataAQuestionnairePatientAndOrganization
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                entry:
                  type: array
                  items:
                    type: object
                    properties:
                      fullUrl:
                        type: string
                        example: transaction-reference-patient
                      request:
                        type: object
                        properties:
                          method:
                            type: string
                            example: PUT
                          url:
                            type: string
                            example: "Questionnaire?url=https://commure.com/fhir/Questionnaire/insurance"
                      resource:
                        type: object
                        properties:
                          active:
                            type: boolean
                            example: true
                          extension:
                            type: array
                            items:
                              type: object
                              properties:
                                extension:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      url:
                                        type: string
                                        example: name
                                      valueCode:
                                        type: string
                                        example: patient
                                      valueId:
                                        type: string
                                        example: patient
                                  example:
                                    - url: name
                                      valueId: patient
                                    - url: type
                                      valueCode: patient
                                url:
                                  type: string
                                  example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                            example:
                              - extension:
                                  - url: name
                                    valueId: patient
                                  - url: type
                                    valueCode: patient
                                url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                              - extension:
                                  - url: name
                                    valueId: coverage
                                  - url: type
                                    valueCode: coverage
                                url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                          identifier:
                            type: array
                            items:
                              type: object
                              properties:
                                system:
                                  type: string
                                  example: "https://commure.com/fhir/sample-identifier-system"
                                value:
                                  type: string
                                  example: sample-patient-giuseppe
                            example:
                              - system: "https://commure.com/fhir/sample-identifier-system"
                                value: sample-patient-giuseppe
                          item:
                            type: array
                            items:
                              type: object
                              properties:
                                extension:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      url:
                                        type: string
                                        example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                      valueExpression:
                                        type: object
                                        properties:
                                          expression:
                                            type: string
                                            example: Coverage
                                          language:
                                            type: string
                                            example: application/x-fhir-query
                                  example:
                                    - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                      valueExpression:
                                        expression: Coverage
                                        language: application/x-fhir-query
                                item:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      answerValueSet:
                                        type: string
                                        example: "http://hl7.org/fhir/ValueSet/fm-status"
                                      definition:
                                        type: string
                                        example: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                      extension:
                                        type: array
                                        items:
                                          type: object
                                          properties:
                                            url:
                                              type: string
                                              example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                            valueExpression:
                                              type: object
                                              properties:
                                                expression:
                                                  type: string
                                                  example: "%coverage.subscriberId"
                                                language:
                                                  type: string
                                                  example: text/fhirpath
                                        example:
                                          - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                            valueExpression:
                                              expression: "%coverage.subscriberId"
                                              language: text/fhirpath
                                      initial:
                                        type: array
                                        items:
                                          type: object
                                          properties:
                                            valueCoding:
                                              type: object
                                              properties:
                                                code:
                                                  type: string
                                                  example: active
                                                system:
                                                  type: string
                                                  example: "http://hl7.org/fhir/ValueSet/fm-status"
                                        example:
                                          - valueCoding:
                                              code: active
                                              system: "http://hl7.org/fhir/ValueSet/fm-status"
                                      linkId:
                                        type: string
                                        example: subscriber-id
                                      required:
                                        type: boolean
                                        example: true
                                      text:
                                        type: string
                                        example: Insurance Id Number
                                      type:
                                        type: string
                                        example: string
                                  example:
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                      extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%coverage.subscriberId"
                                            language: text/fhirpath
                                      linkId: subscriber-id
                                      text: Insurance Id Number
                                      type: string
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                      extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%coverage.payor"
                                            language: text/fhirpath
                                      linkId: payor
                                      text: Insurance company name
                                      type: reference
                                    - answerValueSet: "http://hl7.org/fhir/ValueSet/fm-status"
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                      extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%coverage.status"
                                            language: text/fhirpath
                                      initial:
                                        - valueCoding:
                                            code: active
                                            system: "http://hl7.org/fhir/ValueSet/fm-status"
                                      linkId: status
                                      text: Status of coverage
                                      type: choice
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                      extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "'Patient/'+%patient.id"
                                            language: text/fhirpath
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                      linkId: beneficiary-reference
                                      required: true
                                      type: string
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                      extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%coverage.id"
                                            language: text/fhirpath
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                      linkId: coverage-id
                                      type: string
                                linkId:
                                  type: string
                                  example: coverage
                                type:
                                  type: string
                                  example: group
                            example:
                              - extension:
                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                    valueExpression:
                                      expression: Coverage
                                      language: application/x-fhir-query
                                item:
                                  - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                    extension:
                                      - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                        valueExpression:
                                          expression: "%coverage.subscriberId"
                                          language: text/fhirpath
                                    linkId: subscriber-id
                                    text: Insurance Id Number
                                    type: string
                                  - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                    extension:
                                      - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                        valueExpression:
                                          expression: "%coverage.payor"
                                          language: text/fhirpath
                                    linkId: payor
                                    text: Insurance company name
                                    type: reference
                                  - answerValueSet: "http://hl7.org/fhir/ValueSet/fm-status"
                                    definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                    extension:
                                      - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                        valueExpression:
                                          expression: "%coverage.status"
                                          language: text/fhirpath
                                    initial:
                                      - valueCoding:
                                          code: active
                                          system: "http://hl7.org/fhir/ValueSet/fm-status"
                                    linkId: status
                                    text: Status of coverage
                                    type: choice
                                  - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                    extension:
                                      - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                        valueExpression:
                                          expression: "'Patient/'+%patient.id"
                                          language: text/fhirpath
                                      - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                        valueBoolean: true
                                    linkId: beneficiary-reference
                                    required: true
                                    type: string
                                  - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                    extension:
                                      - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                        valueExpression:
                                          expression: "%coverage.id"
                                          language: text/fhirpath
                                      - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                        valueBoolean: true
                                    linkId: coverage-id
                                    type: string
                                linkId: coverage
                                type: group
                          meta:
                            type: object
                            properties:
                              profile:
                                type: array
                                items:
                                  type: string
                                  example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire"
                                example:
                                  - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire"
                                  - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-populate"
                                  - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extract"
                          name:
                            example: patient-insurance
                            anyOf:
                              - type: string
                                example: patient-insurance
                              - type: array
                                items:
                                  type: object
                                  properties:
                                    family:
                                      type: string
                                      example: Valentini
                                    given:
                                      type: array
                                      items:
                                        type: string
                                        example: Giuseppe
                                      example:
                                        - Giuseppe
                                example:
                                  - family: Valentini
                                    given:
                                      - Giuseppe
                              - type: string
                                example: Insurance Corp of Healthyland
                          resourceType:
                            type: string
                            example: Questionnaire
                          status:
                            type: string
                            example: active
                          subjectType:
                            type: array
                            items:
                              type: string
                              example: Patient
                            example:
                              - Patient
                          title:
                            type: string
                            example: Patient Insurance
                          type:
                            type: array
                            items:
                              type: object
                              properties:
                                coding:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      code:
                                        type: string
                                        example: ins
                                      display:
                                        type: string
                                        example: Insurance Company
                                      system:
                                        type: string
                                        example: "http://terminology.hl7.org/CodeSystem/organization-type"
                                  example:
                                    - code: ins
                                      display: Insurance Company
                                      system: "http://terminology.hl7.org/CodeSystem/organization-type"
                            example:
                              - coding:
                                  - code: ins
                                    display: Insurance Company
                                    system: "http://terminology.hl7.org/CodeSystem/organization-type"
                          url:
                            type: string
                            example: "https://commure.com/fhir/Questionnaire/insurance"
                          version:
                            type: string
                            example: 1.0.0
                  example:
                    - request:
                        method: PUT
                        url: "Questionnaire?url=https://commure.com/fhir/Questionnaire/insurance"
                      resource:
                        extension:
                          - extension:
                              - url: name
                                valueId: patient
                              - url: type
                                valueCode: patient
                            url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                          - extension:
                              - url: name
                                valueId: coverage
                              - url: type
                                valueCode: coverage
                            url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                        item:
                          - extension:
                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                valueExpression:
                                  expression: Coverage
                                  language: application/x-fhir-query
                            item:
                              - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                extension:
                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                    valueExpression:
                                      expression: "%coverage.subscriberId"
                                      language: text/fhirpath
                                linkId: subscriber-id
                                text: Insurance Id Number
                                type: string
                              - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                extension:
                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                    valueExpression:
                                      expression: "%coverage.payor"
                                      language: text/fhirpath
                                linkId: payor
                                text: Insurance company name
                                type: reference
                              - answerValueSet: "http://hl7.org/fhir/ValueSet/fm-status"
                                definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                extension:
                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                    valueExpression:
                                      expression: "%coverage.status"
                                      language: text/fhirpath
                                initial:
                                  - valueCoding:
                                      code: active
                                      system: "http://hl7.org/fhir/ValueSet/fm-status"
                                linkId: status
                                text: Status of coverage
                                type: choice
                              - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                extension:
                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                    valueExpression:
                                      expression: "'Patient/'+%patient.id"
                                      language: text/fhirpath
                                  - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                    valueBoolean: true
                                linkId: beneficiary-reference
                                required: true
                                type: string
                              - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                extension:
                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                    valueExpression:
                                      expression: "%coverage.id"
                                      language: text/fhirpath
                                  - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                    valueBoolean: true
                                linkId: coverage-id
                                type: string
                            linkId: coverage
                            type: group
                        meta:
                          profile:
                            - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire"
                            - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-populate"
                            - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extract"
                        name: patient-insurance
                        resourceType: Questionnaire
                        status: active
                        subjectType:
                          - Patient
                        title: Patient Insurance
                        url: "https://commure.com/fhir/Questionnaire/insurance"
                        version: 1.0.0
                    - fullUrl: transaction-reference-patient
                      request:
                        method: PUT
                        url: "Patient?identifier=https://commure.com/fhir/sample-identifier-system|sample-patient-giuseppe"
                      resource:
                        identifier:
                          - system: "https://commure.com/fhir/sample-identifier-system"
                            value: sample-patient-giuseppe
                        name:
                          - family: Valentini
                            given:
                              - Giuseppe
                        resourceType: Patient
                    - request:
                        method: PUT
                        url: "Organization?identifier=https://commure.com/fhir/sample-identifier-system|sample-insurance-company"
                      resource:
                        active: true
                        identifier:
                          - system: "https://commure.com/fhir/sample-identifier-system"
                            value: sample-insurance-company
                        name: Insurance Corp of Healthyland
                        resourceType: Organization
                        type:
                          - coding:
                              - code: ins
                                display: Insurance Company
                                system: "http://terminology.hl7.org/CodeSystem/organization-type"
                resourceType:
                  type: string
                  example: Bundle
                type:
                  type: string
                  example: transaction
            example:
              entry:
                - request:
                    method: PUT
                    url: "Questionnaire?url=https://commure.com/fhir/Questionnaire/insurance"
                  resource:
                    extension:
                      - extension:
                          - url: name
                            valueId: patient
                          - url: type
                            valueCode: patient
                        url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                      - extension:
                          - url: name
                            valueId: coverage
                          - url: type
                            valueCode: coverage
                        url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                    item:
                      - extension:
                          - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                            valueExpression:
                              expression: Coverage
                              language: application/x-fhir-query
                        item:
                          - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                            extension:
                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                valueExpression:
                                  expression: "%coverage.subscriberId"
                                  language: text/fhirpath
                            linkId: subscriber-id
                            text: Insurance Id Number
                            type: string
                          - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                            extension:
                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                valueExpression:
                                  expression: "%coverage.payor"
                                  language: text/fhirpath
                            linkId: payor
                            text: Insurance company name
                            type: reference
                          - answerValueSet: "http://hl7.org/fhir/ValueSet/fm-status"
                            definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                            extension:
                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                valueExpression:
                                  expression: "%coverage.status"
                                  language: text/fhirpath
                            initial:
                              - valueCoding:
                                  code: active
                                  system: "http://hl7.org/fhir/ValueSet/fm-status"
                            linkId: status
                            text: Status of coverage
                            type: choice
                          - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                            extension:
                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                valueExpression:
                                  expression: "'Patient/'+%patient.id"
                                  language: text/fhirpath
                              - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                valueBoolean: true
                            linkId: beneficiary-reference
                            required: true
                            type: string
                          - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                            extension:
                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                valueExpression:
                                  expression: "%coverage.id"
                                  language: text/fhirpath
                              - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                valueBoolean: true
                            linkId: coverage-id
                            type: string
                        linkId: coverage
                        type: group
                    meta:
                      profile:
                        - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire"
                        - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-populate"
                        - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extract"
                    name: patient-insurance
                    resourceType: Questionnaire
                    status: active
                    subjectType:
                      - Patient
                    title: Patient Insurance
                    url: "https://commure.com/fhir/Questionnaire/insurance"
                    version: 1.0.0
                - fullUrl: transaction-reference-patient
                  request:
                    method: PUT
                    url: "Patient?identifier=https://commure.com/fhir/sample-identifier-system|sample-patient-giuseppe"
                  resource:
                    identifier:
                      - system: "https://commure.com/fhir/sample-identifier-system"
                        value: sample-patient-giuseppe
                    name:
                      - family: Valentini
                        given:
                          - Giuseppe
                    resourceType: Patient
                - request:
                    method: PUT
                    url: "Organization?identifier=https://commure.com/fhir/sample-identifier-system|sample-insurance-company"
                  resource:
                    active: true
                    identifier:
                      - system: "https://commure.com/fhir/sample-identifier-system"
                        value: sample-insurance-company
                    name: Insurance Corp of Healthyland
                    resourceType: Organization
                    type:
                      - coding:
                          - code: ins
                            display: Insurance Company
                            system: "http://terminology.hl7.org/CodeSystem/organization-type"
              resourceType: Bundle
              type: transaction
      responses:
        "200":
          description: Setup Scenario OK
          headers:
            Connection:
              schema:
                type: string
                example: keep-alive
            Content-Encoding:
              schema:
                type: string
                example: gzip
            Content-Length:
              schema:
                type: string
                example: "1809"
            Date:
              schema:
                type: string
                example: "Wed, 21 Oct 2020 16:16:33 GMT"
            P3P:
              schema:
                type: string
                example: "CP=\"This is not a P3P policy.\""
            Server:
              schema:
                type: string
                example: nginx/1.17.10
            Strict-Transport-Security:
              schema:
                type: string
                example: max-age=15724800; includeSubDomains
            X-Correlation-ID:
              schema:
                type: string
                example: 37e2ad5d64854d6bcdd5b053ba51402e
            X-Request-ID:
              schema:
                type: string
                example: 37e2ad5d64854d6bcdd5b053ba51402e
          content:
            application/json:
              schema:
                type: object
                properties:
                  entry:
                    type: array
                    items:
                      type: object
                      properties:
                        resource:
                          type: object
                          properties:
                            active:
                              type: boolean
                              example: true
                            class:
                              type: object
                              properties:
                                code:
                                  type: string
                                  example: PRENC
                                display:
                                  type: string
                                  example: pre-admission
                                system:
                                  type: string
                                  example: "http://terminology.hl7.org/CodeSystem/v3-ActCode"
                            extension:
                              type: array
                              items:
                                type: object
                                properties:
                                  extension:
                                    type: array
                                    items:
                                      type: object
                                      properties:
                                        url:
                                          type: string
                                          example: name
                                        valueCode:
                                          type: string
                                          example: patient
                                        valueId:
                                          type: string
                                          example: patient
                                        valueString:
                                          type: string
                                          example: Patient that is the subject of this questionnaire
                                    example:
                                      - url: name
                                        valueId: patient
                                      - url: type
                                        valueCode: patient
                                      - url: description
                                        valueString: Patient that is the subject of this questionnaire
                                  url:
                                    type: string
                                    example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                              example:
                                - extension:
                                    - url: name
                                      valueId: patient
                                    - url: type
                                      valueCode: patient
                                    - url: description
                                      valueString: Patient that is the subject of this questionnaire
                                  url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                                - extension:
                                    - url: name
                                      valueId: account
                                    - url: type
                                      valueCode: account
                                    - url: description
                                      valueString: Account of the subject Patient
                                  url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                            id:
                              type: string
                              example: 2b3cd557-d8e0-4ebe-8322-fabacb95f9bc
                            item:
                              type: array
                              items:
                                type: object
                                properties:
                                  extension:
                                    type: array
                                    items:
                                      type: object
                                      properties:
                                        url:
                                          type: string
                                          example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                        valueExpression:
                                          type: object
                                          properties:
                                            expression:
                                              type: string
                                              example: Account
                                            language:
                                              type: string
                                              example: application/x-fhir-query
                                    example:
                                      - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                        valueExpression:
                                          expression: Account
                                          language: application/x-fhir-query
                                  item:
                                    type: array
                                    items:
                                      type: object
                                      properties:
                                        definition:
                                          type: string
                                          example: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor"
                                        extension:
                                          type: array
                                          items:
                                            type: object
                                            properties:
                                              url:
                                                type: string
                                                example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                              valueExpression:
                                                type: object
                                                properties:
                                                  expression:
                                                    type: string
                                                    example: "%account.guarantor[0]"
                                                  language:
                                                    type: string
                                                    example: text/fhirpath
                                                  name:
                                                    type: string
                                                    example: guarantor
                                          example:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                              valueExpression:
                                                expression: "%account.guarantor[0]"
                                                language: text/fhirpath
                                                name: guarantor
                                        item:
                                          type: array
                                          items:
                                            type: object
                                            properties:
                                              definition:
                                                type: string
                                                example: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party"
                                              enableBehavior:
                                                type: string
                                                example: all
                                              enableWhen:
                                                type: array
                                                items:
                                                  type: object
                                                  properties:
                                                    answerBoolean:
                                                      type: boolean
                                                      example: false
                                                    operator:
                                                      type: string
                                                      example: "="
                                                    question:
                                                      type: string
                                                      example: guarantor-wants-to-be-patient
                                                example:
                                                  - answerBoolean: false
                                                    operator: "="
                                                    question: guarantor-wants-to-be-patient
                                              extension:
                                                type: array
                                                items:
                                                  type: object
                                                  properties:
                                                    url:
                                                      type: string
                                                      example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                    valueExpression:
                                                      type: object
                                                      properties:
                                                        expression:
                                                          type: string
                                                          example: "%guarantor.party.reference.exists() = false or %guarantor.party.reference = 'Patient/' + %patient.id"
                                                        language:
                                                          type: string
                                                          example: text/fhirpath
                                                example:
                                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                    valueExpression:
                                                      expression: "%guarantor.party.reference.exists() = false or %guarantor.party.reference = 'Patient/' + %patient.id"
                                                      language: text/fhirpath
                                              initial:
                                                type: array
                                                items:
                                                  type: object
                                                  properties:
                                                    valueString:
                                                      type: string
                                                      example: Patient
                                                example:
                                                  - valueString: Patient
                                              linkId:
                                                type: string
                                                example: guarantor-wants-to-be-patient
                                              required:
                                                type: boolean
                                                example: true
                                              text:
                                                type: string
                                                example: Same as patient
                                              type:
                                                type: string
                                                example: boolean
                                          example:
                                            - extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%guarantor.party.reference.exists() = false or %guarantor.party.reference = 'Patient/' + %patient.id"
                                                    language: text/fhirpath
                                              linkId: guarantor-wants-to-be-patient
                                              text: Same as patient
                                              type: boolean
                                            - extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%guarantor.party.exists(reference=('Patient/' + %patient.id))"
                                                    language: text/fhirpath
                                                - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                  valueBoolean: true
                                              linkId: self-guarantor-exists
                                              type: boolean
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party"
                                              enableWhen:
                                                - answerBoolean: false
                                                  operator: "="
                                                  question: guarantor-wants-to-be-patient
                                              extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%account.guarantor.party"
                                                    language: text/fhirpath
                                              linkId: guarantor
                                              required: true
                                              text: Guarantor
                                              type: reference
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                              enableBehavior: all
                                              enableWhen:
                                                - answerBoolean: true
                                                  operator: "="
                                                  question: guarantor-wants-to-be-patient
                                                - answerBoolean: true
                                                  operator: exists
                                                  question: self-guarantor-exists
                                              extension:
                                                - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                  valueBoolean: true
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%account.guarantor.party.reference"
                                                    language: text/fhirpath
                                              linkId: guarantor-existing-self-reference
                                              type: string
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                              enableBehavior: all
                                              enableWhen:
                                                - answerBoolean: true
                                                  operator: "="
                                                  question: guarantor-wants-to-be-patient
                                                - answerBoolean: true
                                                  operator: exists
                                                  question: self-guarantor-exists
                                              extension:
                                                - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                  valueBoolean: true
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%account.guarantor.party.type"
                                                    language: text/fhirpath
                                              linkId: guarantor-existing-self-reference-type
                                              type: string
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                              enableBehavior: all
                                              enableWhen:
                                                - answerBoolean: true
                                                  operator: "="
                                                  question: guarantor-wants-to-be-patient
                                                - answerBoolean: false
                                                  operator: "="
                                                  question: self-guarantor-exists
                                              extension:
                                                - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                  valueBoolean: true
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "'Patient/' + %patient.id"
                                                    language: text/fhirpath
                                              linkId: guarantor-new-self-reference
                                              type: string
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                              enableBehavior: all
                                              enableWhen:
                                                - answerBoolean: true
                                                  operator: "="
                                                  question: guarantor-wants-to-be-patient
                                                - answerBoolean: false
                                                  operator: "="
                                                  question: self-guarantor-exists
                                              extension:
                                                - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                  valueBoolean: true
                                              initial:
                                                - valueString: Patient
                                              linkId: guarantor-new-self-reference-type
                                              type: string
                                        linkId:
                                          type: string
                                          example: guarantor-group
                                        type:
                                          type: string
                                          example: group
                                    example:
                                      - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor"
                                        extension:
                                          - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                            valueExpression:
                                              expression: "%account.guarantor[0]"
                                              language: text/fhirpath
                                              name: guarantor
                                        item:
                                          - extension:
                                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                valueExpression:
                                                  expression: "%guarantor.party.reference.exists() = false or %guarantor.party.reference = 'Patient/' + %patient.id"
                                                  language: text/fhirpath
                                            linkId: guarantor-wants-to-be-patient
                                            text: Same as patient
                                            type: boolean
                                          - extension:
                                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                valueExpression:
                                                  expression: "%guarantor.party.exists(reference=('Patient/' + %patient.id))"
                                                  language: text/fhirpath
                                              - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                valueBoolean: true
                                            linkId: self-guarantor-exists
                                            type: boolean
                                          - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party"
                                            enableWhen:
                                              - answerBoolean: false
                                                operator: "="
                                                question: guarantor-wants-to-be-patient
                                            extension:
                                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                valueExpression:
                                                  expression: "%account.guarantor.party"
                                                  language: text/fhirpath
                                            linkId: guarantor
                                            required: true
                                            text: Guarantor
                                            type: reference
                                          - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                            enableBehavior: all
                                            enableWhen:
                                              - answerBoolean: true
                                                operator: "="
                                                question: guarantor-wants-to-be-patient
                                              - answerBoolean: true
                                                operator: exists
                                                question: self-guarantor-exists
                                            extension:
                                              - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                valueBoolean: true
                                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                valueExpression:
                                                  expression: "%account.guarantor.party.reference"
                                                  language: text/fhirpath
                                            linkId: guarantor-existing-self-reference
                                            type: string
                                          - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                            enableBehavior: all
                                            enableWhen:
                                              - answerBoolean: true
                                                operator: "="
                                                question: guarantor-wants-to-be-patient
                                              - answerBoolean: true
                                                operator: exists
                                                question: self-guarantor-exists
                                            extension:
                                              - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                valueBoolean: true
                                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                valueExpression:
                                                  expression: "%account.guarantor.party.type"
                                                  language: text/fhirpath
                                            linkId: guarantor-existing-self-reference-type
                                            type: string
                                          - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                            enableBehavior: all
                                            enableWhen:
                                              - answerBoolean: true
                                                operator: "="
                                                question: guarantor-wants-to-be-patient
                                              - answerBoolean: false
                                                operator: "="
                                                question: self-guarantor-exists
                                            extension:
                                              - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                valueBoolean: true
                                              - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                valueExpression:
                                                  expression: "'Patient/' + %patient.id"
                                                  language: text/fhirpath
                                            linkId: guarantor-new-self-reference
                                            type: string
                                          - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                            enableBehavior: all
                                            enableWhen:
                                              - answerBoolean: true
                                                operator: "="
                                                question: guarantor-wants-to-be-patient
                                              - answerBoolean: false
                                                operator: "="
                                                question: self-guarantor-exists
                                            extension:
                                              - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                valueBoolean: true
                                            initial:
                                              - valueString: Patient
                                            linkId: guarantor-new-self-reference-type
                                            type: string
                                        linkId: guarantor-group
                                        type: group
                                      - item:
                                          - extension:
                                              - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                                valueBoolean: true
                                            item:
                                              - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.id"
                                                extension:
                                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                    valueExpression:
                                                      expression: "%account.id"
                                                      language: text/fhirpath
                                                linkId: account-id
                                                type: string
                                              - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject"
                                                extension:
                                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                                    valueExpression:
                                                      expression: "%account.subject"
                                                      language: text/fhirpath
                                                      name: subject
                                                item:
                                                  - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject.reference"
                                                    extension:
                                                      - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                        valueExpression:
                                                          expression: "%subject.reference"
                                                          language: text/fhirpath
                                                    linkId: account-subject-existing
                                                    type: string
                                                linkId: account-subject-existing-group
                                                type: group
                                              - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject.reference"
                                                enableWhen:
                                                  - answerBoolean: false
                                                    operator: exists
                                                    question: account-subject-existing
                                                extension:
                                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                    valueExpression:
                                                      expression: "'Patient/' + %patient.id"
                                                      language: text/fhirpath
                                                linkId: account-subject-new
                                                type: string
                                              - answerValueSet: "http://hl7.org/fhir/ValueSet/account-status"
                                                definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.status"
                                                extension:
                                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                    valueExpression:
                                                      expression: "%account.status"
                                                      language: text/fhirpath
                                                initial:
                                                  - valueCoding:
                                                      code: active
                                                      system: "http://hl7.org/fhir/account-status"
                                                linkId: account-status
                                                type: choice
                                              - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.owner"
                                                extension:
                                                  - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                    valueExpression:
                                                      expression: "%account.owner"
                                                      language: text/fhirpath
                                                initial:
                                                  - valueReference:
                                                      identifier:
                                                        system: "https://commure.com/fhir/identifiers/Organization/commure"
                                                        value: commure
                                                      type: Organization
                                                linkId: account-owner
                                                type: reference
                                            linkId: account
                                            type: group
                                        linkId: guarantor-related-person
                                        type: group
                                  linkId:
                                    type: string
                                    example: guarantor-page
                                  text:
                                    type: string
                                    example: Guarantor
                                  type:
                                    type: string
                                    example: group
                              example:
                                - extension:
                                    - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                      valueExpression:
                                        expression: Account
                                        language: application/x-fhir-query
                                  item:
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor"
                                      extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                          valueExpression:
                                            expression: "%account.guarantor[0]"
                                            language: text/fhirpath
                                            name: guarantor
                                      item:
                                        - extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%guarantor.party.reference.exists() = false or %guarantor.party.reference = 'Patient/' + %patient.id"
                                                language: text/fhirpath
                                          linkId: guarantor-wants-to-be-patient
                                          text: Same as patient
                                          type: boolean
                                        - extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%guarantor.party.exists(reference=('Patient/' + %patient.id))"
                                                language: text/fhirpath
                                            - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                              valueBoolean: true
                                          linkId: self-guarantor-exists
                                          type: boolean
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party"
                                          enableWhen:
                                            - answerBoolean: false
                                              operator: "="
                                              question: guarantor-wants-to-be-patient
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.guarantor.party"
                                                language: text/fhirpath
                                          linkId: guarantor
                                          required: true
                                          text: Guarantor
                                          type: reference
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                          enableBehavior: all
                                          enableWhen:
                                            - answerBoolean: true
                                              operator: "="
                                              question: guarantor-wants-to-be-patient
                                            - answerBoolean: true
                                              operator: exists
                                              question: self-guarantor-exists
                                          extension:
                                            - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                              valueBoolean: true
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.guarantor.party.reference"
                                                language: text/fhirpath
                                          linkId: guarantor-existing-self-reference
                                          type: string
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                          enableBehavior: all
                                          enableWhen:
                                            - answerBoolean: true
                                              operator: "="
                                              question: guarantor-wants-to-be-patient
                                            - answerBoolean: true
                                              operator: exists
                                              question: self-guarantor-exists
                                          extension:
                                            - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                              valueBoolean: true
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.guarantor.party.type"
                                                language: text/fhirpath
                                          linkId: guarantor-existing-self-reference-type
                                          type: string
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                          enableBehavior: all
                                          enableWhen:
                                            - answerBoolean: true
                                              operator: "="
                                              question: guarantor-wants-to-be-patient
                                            - answerBoolean: false
                                              operator: "="
                                              question: self-guarantor-exists
                                          extension:
                                            - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                              valueBoolean: true
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "'Patient/' + %patient.id"
                                                language: text/fhirpath
                                          linkId: guarantor-new-self-reference
                                          type: string
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                          enableBehavior: all
                                          enableWhen:
                                            - answerBoolean: true
                                              operator: "="
                                              question: guarantor-wants-to-be-patient
                                            - answerBoolean: false
                                              operator: "="
                                              question: self-guarantor-exists
                                          extension:
                                            - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                              valueBoolean: true
                                          initial:
                                            - valueString: Patient
                                          linkId: guarantor-new-self-reference-type
                                          type: string
                                      linkId: guarantor-group
                                      type: group
                                    - item:
                                        - extension:
                                            - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                              valueBoolean: true
                                          item:
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.id"
                                              extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%account.id"
                                                    language: text/fhirpath
                                              linkId: account-id
                                              type: string
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject"
                                              extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                                  valueExpression:
                                                    expression: "%account.subject"
                                                    language: text/fhirpath
                                                    name: subject
                                              item:
                                                - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject.reference"
                                                  extension:
                                                    - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                      valueExpression:
                                                        expression: "%subject.reference"
                                                        language: text/fhirpath
                                                  linkId: account-subject-existing
                                                  type: string
                                              linkId: account-subject-existing-group
                                              type: group
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject.reference"
                                              enableWhen:
                                                - answerBoolean: false
                                                  operator: exists
                                                  question: account-subject-existing
                                              extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "'Patient/' + %patient.id"
                                                    language: text/fhirpath
                                              linkId: account-subject-new
                                              type: string
                                            - answerValueSet: "http://hl7.org/fhir/ValueSet/account-status"
                                              definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.status"
                                              extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%account.status"
                                                    language: text/fhirpath
                                              initial:
                                                - valueCoding:
                                                    code: active
                                                    system: "http://hl7.org/fhir/account-status"
                                              linkId: account-status
                                              type: choice
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.owner"
                                              extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%account.owner"
                                                    language: text/fhirpath
                                              initial:
                                                - valueReference:
                                                    identifier:
                                                      system: "https://commure.com/fhir/identifiers/Organization/commure"
                                                      value: commure
                                                    type: Organization
                                              linkId: account-owner
                                              type: reference
                                          linkId: account
                                          type: group
                                      linkId: guarantor-related-person
                                      type: group
                                  linkId: guarantor-page
                                  text: Guarantor
                                  type: group
                            link:
                              type: array
                              items:
                                type: object
                                properties:
                                  target:
                                    type: object
                                    properties:
                                      reference:
                                        type: string
                                        example: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                              example:
                                - target:
                                    reference: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                            meta:
                              type: object
                              properties:
                                extension:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      extension:
                                        type: array
                                        items:
                                          type: object
                                          properties:
                                            url:
                                              type: string
                                              example: clientname
                                            valueReference:
                                              type: object
                                              properties:
                                                reference:
                                                  type: string
                                                  example: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                            valueString:
                                              type: string
                                              example: data_uploader
                                        example:
                                          - url: clientname
                                            valueString: data_uploader
                                          - url: person
                                            valueReference:
                                              reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                      url:
                                        type: string
                                        example: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                                  example:
                                    - extension:
                                        - url: clientname
                                          valueString: data_uploader
                                        - url: person
                                          valueReference:
                                            reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                      url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                                lastUpdated:
                                  type: string
                                  example: "2020-10-21T16:16:33.649723+00:00"
                                profile:
                                  type: array
                                  items:
                                    type: string
                                    example: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire"
                                  example:
                                    - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire"
                                    - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-populate"
                                    - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extract"
                                versionId:
                                  type: string
                                  example: 53118811-55e0-4337-81dc-06ebc85b2a2d
                            name:
                              example: patient-guarantor
                              anyOf:
                                - type: string
                                  example: patient-guarantor
                                - type: array
                                  items:
                                    type: object
                                    properties:
                                      family:
                                        type: string
                                        example: Patient
                                      given:
                                        type: array
                                        items:
                                          type: string
                                          example: Test
                                        example:
                                          - Test
                                  example:
                                    - family: Patient
                                      given:
                                        - Test
                                - type: array
                                  items:
                                    type: object
                                    properties:
                                      family:
                                        type: string
                                        example: Patient
                                      given:
                                        type: array
                                        items:
                                          type: string
                                          example: Test
                                        example:
                                          - Test
                                  example:
                                    - family: Patient
                                      given:
                                        - Test
                            period:
                              type: object
                              properties:
                                start:
                                  type: string
                                  example: "2020-10-20T01:45:32.00-05:00"
                            resourceType:
                              type: string
                              example: Questionnaire
                            status:
                              type: string
                              example: active
                            subject:
                              type: object
                              properties:
                                reference:
                                  type: string
                                  example: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                                type:
                                  type: string
                                  example: Patient
                            subjectType:
                              type: array
                              items:
                                type: string
                                example: Patient
                              example:
                                - Patient
                            title:
                              type: string
                              example: Patient Guarantor
                            url:
                              type: string
                              example: "http://commure.com/fhir/Questionnaire/guarantor"
                            version:
                              type: string
                              example: 1.0.0
                        response:
                          type: object
                          properties:
                            etag:
                              type: string
                              example: "W/\"53118811-55e0-4337-81dc-06ebc85b2a2d\""
                            lastModified:
                              type: string
                              example: "2020-10-21T16:16:33+00:00"
                            location:
                              type: string
                              example: "https://api-53914125.developer.commure.com/api/v1/r4/Questionnaire/2b3cd557-d8e0-4ebe-8322-fabacb95f9bc/_history/53118811-55e0-4337-81dc-06ebc85b2a2d"
                            status:
                              type: string
                              example: "201"
                    example:
                      - resource:
                          extension:
                            - extension:
                                - url: name
                                  valueId: patient
                                - url: type
                                  valueCode: patient
                                - url: description
                                  valueString: Patient that is the subject of this questionnaire
                              url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                            - extension:
                                - url: name
                                  valueId: account
                                - url: type
                                  valueCode: account
                                - url: description
                                  valueString: Account of the subject Patient
                              url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                          id: 2b3cd557-d8e0-4ebe-8322-fabacb95f9bc
                          item:
                            - extension:
                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                  valueExpression:
                                    expression: Account
                                    language: application/x-fhir-query
                              item:
                                - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor"
                                  extension:
                                    - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                      valueExpression:
                                        expression: "%account.guarantor[0]"
                                        language: text/fhirpath
                                        name: guarantor
                                  item:
                                    - extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%guarantor.party.reference.exists() = false or %guarantor.party.reference = 'Patient/' + %patient.id"
                                            language: text/fhirpath
                                      linkId: guarantor-wants-to-be-patient
                                      text: Same as patient
                                      type: boolean
                                    - extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%guarantor.party.exists(reference=('Patient/' + %patient.id))"
                                            language: text/fhirpath
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                      linkId: self-guarantor-exists
                                      type: boolean
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party"
                                      enableWhen:
                                        - answerBoolean: false
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                      extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%account.guarantor.party"
                                            language: text/fhirpath
                                      linkId: guarantor
                                      required: true
                                      text: Guarantor
                                      type: reference
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                      enableBehavior: all
                                      enableWhen:
                                        - answerBoolean: true
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                        - answerBoolean: true
                                          operator: exists
                                          question: self-guarantor-exists
                                      extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%account.guarantor.party.reference"
                                            language: text/fhirpath
                                      linkId: guarantor-existing-self-reference
                                      type: string
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                      enableBehavior: all
                                      enableWhen:
                                        - answerBoolean: true
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                        - answerBoolean: true
                                          operator: exists
                                          question: self-guarantor-exists
                                      extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%account.guarantor.party.type"
                                            language: text/fhirpath
                                      linkId: guarantor-existing-self-reference-type
                                      type: string
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                      enableBehavior: all
                                      enableWhen:
                                        - answerBoolean: true
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                        - answerBoolean: false
                                          operator: "="
                                          question: self-guarantor-exists
                                      extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "'Patient/' + %patient.id"
                                            language: text/fhirpath
                                      linkId: guarantor-new-self-reference
                                      type: string
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                      enableBehavior: all
                                      enableWhen:
                                        - answerBoolean: true
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                        - answerBoolean: false
                                          operator: "="
                                          question: self-guarantor-exists
                                      extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                      initial:
                                        - valueString: Patient
                                      linkId: guarantor-new-self-reference-type
                                      type: string
                                  linkId: guarantor-group
                                  type: group
                                - item:
                                    - extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                      item:
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.id"
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.id"
                                                language: text/fhirpath
                                          linkId: account-id
                                          type: string
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject"
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                              valueExpression:
                                                expression: "%account.subject"
                                                language: text/fhirpath
                                                name: subject
                                          item:
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject.reference"
                                              extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%subject.reference"
                                                    language: text/fhirpath
                                              linkId: account-subject-existing
                                              type: string
                                          linkId: account-subject-existing-group
                                          type: group
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject.reference"
                                          enableWhen:
                                            - answerBoolean: false
                                              operator: exists
                                              question: account-subject-existing
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "'Patient/' + %patient.id"
                                                language: text/fhirpath
                                          linkId: account-subject-new
                                          type: string
                                        - answerValueSet: "http://hl7.org/fhir/ValueSet/account-status"
                                          definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.status"
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.status"
                                                language: text/fhirpath
                                          initial:
                                            - valueCoding:
                                                code: active
                                                system: "http://hl7.org/fhir/account-status"
                                          linkId: account-status
                                          type: choice
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.owner"
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.owner"
                                                language: text/fhirpath
                                          initial:
                                            - valueReference:
                                                identifier:
                                                  system: "https://commure.com/fhir/identifiers/Organization/commure"
                                                  value: commure
                                                type: Organization
                                          linkId: account-owner
                                          type: reference
                                      linkId: account
                                      type: group
                                  linkId: guarantor-related-person
                                  type: group
                              linkId: guarantor-page
                              text: Guarantor
                              type: group
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.649723+00:00"
                            profile:
                              - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire"
                              - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-populate"
                              - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extract"
                            versionId: 53118811-55e0-4337-81dc-06ebc85b2a2d
                          name: patient-guarantor
                          resourceType: Questionnaire
                          status: active
                          subjectType:
                            - Patient
                          title: Patient Guarantor
                          url: "http://commure.com/fhir/Questionnaire/guarantor"
                          version: 1.0.0
                        response:
                          etag: "W/\"53118811-55e0-4337-81dc-06ebc85b2a2d\""
                          lastModified: "2020-10-21T16:16:33+00:00"
                          location: "https://api-53914125.developer.commure.com/api/v1/r4/Questionnaire/2b3cd557-d8e0-4ebe-8322-fabacb95f9bc/_history/53118811-55e0-4337-81dc-06ebc85b2a2d"
                          status: "201"
                      - resource:
                          id: cca00185-bc2e-435f-af0b-eecb8d4af9c2
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.711007+00:00"
                            versionId: bd250ec1-2d24-49ec-9c52-5c7573d7b520
                          name:
                            - family: Patient
                              given:
                                - Test
                          resourceType: Patient
                        response:
                          etag: "W/\"bd250ec1-2d24-49ec-9c52-5c7573d7b520\""
                          lastModified: "2020-10-21T16:16:33+00:00"
                          location: "https://api-53914125.developer.commure.com/api/v1/r4/Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2/_history/bd250ec1-2d24-49ec-9c52-5c7573d7b520"
                          status: "201"
                      - resource:
                          active: true
                          id: af46fbed-38e8-48c3-bfba-dd883a19bac2
                          link:
                            - target:
                                reference: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.755109+00:00"
                            versionId: 405f0a43-17cb-49be-a0c9-1316b2f279b1
                          name:
                            - family: Patient
                              given:
                                - Test
                          resourceType: Person
                        response:
                          etag: "W/\"405f0a43-17cb-49be-a0c9-1316b2f279b1\""
                          lastModified: "2020-10-21T16:16:33+00:00"
                          location: "https://api-53914125.developer.commure.com/api/v1/r4/Person/af46fbed-38e8-48c3-bfba-dd883a19bac2/_history/405f0a43-17cb-49be-a0c9-1316b2f279b1"
                          status: "201"
                      - resource:
                          class:
                            code: PRENC
                            display: pre-admission
                            system: "http://terminology.hl7.org/CodeSystem/v3-ActCode"
                          id: c85827b1-13e5-401c-89c5-774c77102346
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.805923+00:00"
                            versionId: 2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d
                          period:
                            start: "2020-10-20T01:45:32.00-05:00"
                          resourceType: Encounter
                          status: in-progress
                          subject:
                            reference: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                            type: Patient
                        response:
                          etag: "W/\"2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d\""
                          lastModified: "2020-10-21T16:16:33+00:00"
                          location: "https://api-53914125.developer.commure.com/api/v1/r4/Encounter/c85827b1-13e5-401c-89c5-774c77102346/_history/2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d"
                          status: "201"
                  resourceType:
                    type: string
                    example: Bundle
                  type:
                    type: string
                    example: transaction-response
              examples:
                Setup Scenario OK:
                  value:
                    entry:
                      - resource:
                          extension:
                            - extension:
                                - url: name
                                  valueId: patient
                                - url: type
                                  valueCode: patient
                                - url: description
                                  valueString: Patient that is the subject of this questionnaire
                              url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                            - extension:
                                - url: name
                                  valueId: account
                                - url: type
                                  valueCode: account
                                - url: description
                                  valueString: Account of the subject Patient
                              url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
                          id: 2b3cd557-d8e0-4ebe-8322-fabacb95f9bc
                          item:
                            - extension:
                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                  valueExpression:
                                    expression: Account
                                    language: application/x-fhir-query
                              item:
                                - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor"
                                  extension:
                                    - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                      valueExpression:
                                        expression: "%account.guarantor[0]"
                                        language: text/fhirpath
                                        name: guarantor
                                  item:
                                    - extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%guarantor.party.reference.exists() = false or %guarantor.party.reference = 'Patient/' + %patient.id"
                                            language: text/fhirpath
                                      linkId: guarantor-wants-to-be-patient
                                      text: Same as patient
                                      type: boolean
                                    - extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%guarantor.party.exists(reference=('Patient/' + %patient.id))"
                                            language: text/fhirpath
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                      linkId: self-guarantor-exists
                                      type: boolean
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party"
                                      enableWhen:
                                        - answerBoolean: false
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                      extension:
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%account.guarantor.party"
                                            language: text/fhirpath
                                      linkId: guarantor
                                      required: true
                                      text: Guarantor
                                      type: reference
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                      enableBehavior: all
                                      enableWhen:
                                        - answerBoolean: true
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                        - answerBoolean: true
                                          operator: exists
                                          question: self-guarantor-exists
                                      extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%account.guarantor.party.reference"
                                            language: text/fhirpath
                                      linkId: guarantor-existing-self-reference
                                      type: string
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                      enableBehavior: all
                                      enableWhen:
                                        - answerBoolean: true
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                        - answerBoolean: true
                                          operator: exists
                                          question: self-guarantor-exists
                                      extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "%account.guarantor.party.type"
                                            language: text/fhirpath
                                      linkId: guarantor-existing-self-reference-type
                                      type: string
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.reference"
                                      enableBehavior: all
                                      enableWhen:
                                        - answerBoolean: true
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                        - answerBoolean: false
                                          operator: "="
                                          question: self-guarantor-exists
                                      extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                        - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                          valueExpression:
                                            expression: "'Patient/' + %patient.id"
                                            language: text/fhirpath
                                      linkId: guarantor-new-self-reference
                                      type: string
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.guarantor.party.type"
                                      enableBehavior: all
                                      enableWhen:
                                        - answerBoolean: true
                                          operator: "="
                                          question: guarantor-wants-to-be-patient
                                        - answerBoolean: false
                                          operator: "="
                                          question: self-guarantor-exists
                                      extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                      initial:
                                        - valueString: Patient
                                      linkId: guarantor-new-self-reference-type
                                      type: string
                                  linkId: guarantor-group
                                  type: group
                                - item:
                                    - extension:
                                        - url: "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden"
                                          valueBoolean: true
                                      item:
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.id"
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.id"
                                                language: text/fhirpath
                                          linkId: account-id
                                          type: string
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject"
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemContext"
                                              valueExpression:
                                                expression: "%account.subject"
                                                language: text/fhirpath
                                                name: subject
                                          item:
                                            - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject.reference"
                                              extension:
                                                - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                                  valueExpression:
                                                    expression: "%subject.reference"
                                                    language: text/fhirpath
                                              linkId: account-subject-existing
                                              type: string
                                          linkId: account-subject-existing-group
                                          type: group
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.subject.reference"
                                          enableWhen:
                                            - answerBoolean: false
                                              operator: exists
                                              question: account-subject-existing
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "'Patient/' + %patient.id"
                                                language: text/fhirpath
                                          linkId: account-subject-new
                                          type: string
                                        - answerValueSet: "http://hl7.org/fhir/ValueSet/account-status"
                                          definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.status"
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.status"
                                                language: text/fhirpath
                                          initial:
                                            - valueCoding:
                                                code: active
                                                system: "http://hl7.org/fhir/account-status"
                                          linkId: account-status
                                          type: choice
                                        - definition: "http://hl7.org/fhir/StructureDefinition/Account#Account.owner"
                                          extension:
                                            - url: "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression"
                                              valueExpression:
                                                expression: "%account.owner"
                                                language: text/fhirpath
                                          initial:
                                            - valueReference:
                                                identifier:
                                                  system: "https://commure.com/fhir/identifiers/Organization/commure"
                                                  value: commure
                                                type: Organization
                                          linkId: account-owner
                                          type: reference
                                      linkId: account
                                      type: group
                                  linkId: guarantor-related-person
                                  type: group
                              linkId: guarantor-page
                              text: Guarantor
                              type: group
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.649723+00:00"
                            profile:
                              - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire"
                              - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-populate"
                              - "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extract"
                            versionId: 53118811-55e0-4337-81dc-06ebc85b2a2d
                          name: patient-guarantor
                          resourceType: Questionnaire
                          status: active
                          subjectType:
                            - Patient
                          title: Patient Guarantor
                          url: "http://commure.com/fhir/Questionnaire/guarantor"
                          version: 1.0.0
                        response:
                          etag: "W/\"53118811-55e0-4337-81dc-06ebc85b2a2d\""
                          lastModified: "2020-10-21T16:16:33+00:00"
                          location: "https://api-53914125.developer.commure.com/api/v1/r4/Questionnaire/2b3cd557-d8e0-4ebe-8322-fabacb95f9bc/_history/53118811-55e0-4337-81dc-06ebc85b2a2d"
                          status: "201"
                      - resource:
                          id: cca00185-bc2e-435f-af0b-eecb8d4af9c2
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.711007+00:00"
                            versionId: bd250ec1-2d24-49ec-9c52-5c7573d7b520
                          name:
                            - family: Patient
                              given:
                                - Test
                          resourceType: Patient
                        response:
                          etag: "W/\"bd250ec1-2d24-49ec-9c52-5c7573d7b520\""
                          lastModified: "2020-10-21T16:16:33+00:00"
                          location: "https://api-53914125.developer.commure.com/api/v1/r4/Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2/_history/bd250ec1-2d24-49ec-9c52-5c7573d7b520"
                          status: "201"
                      - resource:
                          active: true
                          id: af46fbed-38e8-48c3-bfba-dd883a19bac2
                          link:
                            - target:
                                reference: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.755109+00:00"
                            versionId: 405f0a43-17cb-49be-a0c9-1316b2f279b1
                          name:
                            - family: Patient
                              given:
                                - Test
                          resourceType: Person
                        response:
                          etag: "W/\"405f0a43-17cb-49be-a0c9-1316b2f279b1\""
                          lastModified: "2020-10-21T16:16:33+00:00"
                          location: "https://api-53914125.developer.commure.com/api/v1/r4/Person/af46fbed-38e8-48c3-bfba-dd883a19bac2/_history/405f0a43-17cb-49be-a0c9-1316b2f279b1"
                          status: "201"
                      - resource:
                          class:
                            code: PRENC
                            display: pre-admission
                            system: "http://terminology.hl7.org/CodeSystem/v3-ActCode"
                          id: c85827b1-13e5-401c-89c5-774c77102346
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.805923+00:00"
                            versionId: 2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d
                          period:
                            start: "2020-10-20T01:45:32.00-05:00"
                          resourceType: Encounter
                          status: in-progress
                          subject:
                            reference: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                            type: Patient
                        response:
                          etag: "W/\"2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d\""
                          lastModified: "2020-10-21T16:16:33+00:00"
                          location: "https://api-53914125.developer.commure.com/api/v1/r4/Encounter/c85827b1-13e5-401c-89c5-774c77102346/_history/2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d"
                          status: "201"
                    resourceType: Bundle
                    type: transaction-response
  /api/v1/r4/Questionnaire/populate:
    post:
      summary: 3. A partially-filled QuestionnaireResponse is generated with $populate
      description: "Next, the healthcare provider will select to start a new response to the “Patient Insurance” `Questionnaire` in the context of the previously selected Patient. The selected `Questionnaire` resource’s questions serve as a template for a new `QuestionnaireResponse` resource that will contain the provider’s responses to questions, as its name suggests.\n\nClient applications can avoid much of the complexity involved in deriving a `QuestionnaireResponse` from a `Questionnaire` by taking advantage of the extended operation, `Questionnaire/$populate`. In the process of creating a new `QuestionnaireResponse`, the operation fills in answers to questions wherever possible.\n\nExtended operations, denoted with names that start with a dollar sign ($), provide additional functionality beyond the basic CRUD operations defined in the FHIR REST API specification. The inputs of extended operations are often provided as a collection of key-value pairs in a Parameters resource, as shown in this request.\n\nOmitted from this request is the use of the optional parameter, content, which is used to provide additional context during the populate process. The `Questionnaire` in this scenario is written such that an existing `Coverage` resource in the content parameter can potentially populate the entirety of the `QuestionnaireResponse`."
      operationId: 3APartiallyFilledQuestionnaireResponseIsGeneratedWithPopulate
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                parameter:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        example: identifier
                      valueBoolean:
                        type: boolean
                        example: true
                      valueReference:
                        type: object
                        properties:
                          reference:
                            type: string
                            example: "Patient/{{patient-id}}"
                      valueUri:
                        type: string
                        example: "https://commure.com/fhir/Questionnaire/insurance"
                  example:
                    - name: identifier
                      valueUri: "https://commure.com/fhir/Questionnaire/insurance"
                    - name: subject
                      valueReference:
                        reference: "Patient/{{patient-id}}"
                    - name: local
                      valueBoolean: true
                resourceType:
                  type: string
                  example: Parameters
            example:
              parameter:
                - name: identifier
                  valueUri: "https://commure.com/fhir/Questionnaire/insurance"
                - name: subject
                  valueReference:
                    reference: "Patient/{{patient-id}}"
                - name: local
                  valueBoolean: true
              resourceType: Parameters
      responses:
        "200":
          description: Get the Patient and Encounter OK
          headers:
            Connection:
              schema:
                type: string
                example: keep-alive
            Content-Encoding:
              schema:
                type: string
                example: gzip
            Content-Length:
              schema:
                type: string
                example: "705"
            Date:
              schema:
                type: string
                example: "Wed, 21 Oct 2020 16:20:04 GMT"
            P3P:
              schema:
                type: string
                example: "CP=\"This is not a P3P policy.\""
            Server:
              schema:
                type: string
                example: nginx/1.17.10
            Strict-Transport-Security:
              schema:
                type: string
                example: max-age=15724800; includeSubDomains
            X-Correlation-ID:
              schema:
                type: string
                example: f45555a08f8e12257019702293a3b684
            X-Request-ID:
              schema:
                type: string
                example: f45555a08f8e12257019702293a3b684
          content:
            application/json:
              schema:
                type: object
                properties:
                  entry:
                    type: array
                    items:
                      type: object
                      properties:
                        fullUrl:
                          type: string
                          example: "https://api-53914125.developer.commure.com/api/v1/r4/Encounter/c85827b1-13e5-401c-89c5-774c77102346"
                        resource:
                          type: object
                          properties:
                            class:
                              type: object
                              properties:
                                code:
                                  type: string
                                  example: PRENC
                                display:
                                  type: string
                                  example: pre-admission
                                system:
                                  type: string
                                  example: "http://terminology.hl7.org/CodeSystem/v3-ActCode"
                            id:
                              type: string
                              example: c85827b1-13e5-401c-89c5-774c77102346
                            meta:
                              type: object
                              properties:
                                extension:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      extension:
                                        type: array
                                        items:
                                          type: object
                                          properties:
                                            url:
                                              type: string
                                              example: clientname
                                            valueReference:
                                              type: object
                                              properties:
                                                reference:
                                                  type: string
                                                  example: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                            valueString:
                                              type: string
                                              example: data_uploader
                                        example:
                                          - url: clientname
                                            valueString: data_uploader
                                          - url: person
                                            valueReference:
                                              reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                      url:
                                        type: string
                                        example: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                                  example:
                                    - extension:
                                        - url: clientname
                                          valueString: data_uploader
                                        - url: person
                                          valueReference:
                                            reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                      url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                                lastUpdated:
                                  type: string
                                  example: "2020-10-21T16:16:33.805923+00:00"
                                versionId:
                                  type: string
                                  example: 2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d
                            name:
                              type: array
                              items:
                                type: object
                                properties:
                                  family:
                                    type: string
                                    example: Patient
                                  given:
                                    type: array
                                    items:
                                      type: string
                                      example: Test
                                    example:
                                      - Test
                              example:
                                - family: Patient
                                  given:
                                    - Test
                            period:
                              type: object
                              properties:
                                start:
                                  type: string
                                  example: "2020-10-20T01:45:32.00-05:00"
                            resourceType:
                              type: string
                              example: Encounter
                            status:
                              type: string
                              example: in-progress
                            subject:
                              type: object
                              properties:
                                reference:
                                  type: string
                                  example: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                                type:
                                  type: string
                                  example: Patient
                        search:
                          type: object
                          properties:
                            mode:
                              type: string
                              example: match
                    example:
                      - fullUrl: "https://api-53914125.developer.commure.com/api/v1/r4/Encounter/c85827b1-13e5-401c-89c5-774c77102346"
                        resource:
                          class:
                            code: PRENC
                            display: pre-admission
                            system: "http://terminology.hl7.org/CodeSystem/v3-ActCode"
                          id: c85827b1-13e5-401c-89c5-774c77102346
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.805923+00:00"
                            versionId: 2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d
                          period:
                            start: "2020-10-20T01:45:32.00-05:00"
                          resourceType: Encounter
                          status: in-progress
                          subject:
                            reference: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                            type: Patient
                        search:
                          mode: match
                      - fullUrl: "https://api-53914125.developer.commure.com/api/v1/r4/Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2"
                        resource:
                          id: cca00185-bc2e-435f-af0b-eecb8d4af9c2
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.711007+00:00"
                            versionId: bd250ec1-2d24-49ec-9c52-5c7573d7b520
                          name:
                            - family: Patient
                              given:
                                - Test
                          resourceType: Patient
                        search:
                          mode: include
                  link:
                    type: array
                    items:
                      type: object
                      properties:
                        relation:
                          type: string
                          example: self
                        url:
                          type: string
                          example: Encounter?status=in-progress&_include=Encounter%3Asubject&subject=cca00185-bc2e-435f-af0b-eecb8d4af9c2&_count=50
                    example:
                      - relation: self
                        url: Encounter?status=in-progress&_include=Encounter%3Asubject&subject=cca00185-bc2e-435f-af0b-eecb8d4af9c2&_count=50
                  resourceType:
                    type: string
                    example: Bundle
                  type:
                    type: string
                    example: searchset
              examples:
                Get the Patient and Encounter OK:
                  value:
                    entry:
                      - fullUrl: "https://api-53914125.developer.commure.com/api/v1/r4/Encounter/c85827b1-13e5-401c-89c5-774c77102346"
                        resource:
                          class:
                            code: PRENC
                            display: pre-admission
                            system: "http://terminology.hl7.org/CodeSystem/v3-ActCode"
                          id: c85827b1-13e5-401c-89c5-774c77102346
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.805923+00:00"
                            versionId: 2ac36db1-f3fb-49da-8ee4-ca3d8518ca9d
                          period:
                            start: "2020-10-20T01:45:32.00-05:00"
                          resourceType: Encounter
                          status: in-progress
                          subject:
                            reference: Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2
                            type: Patient
                        search:
                          mode: match
                      - fullUrl: "https://api-53914125.developer.commure.com/api/v1/r4/Patient/cca00185-bc2e-435f-af0b-eecb8d4af9c2"
                        resource:
                          id: cca00185-bc2e-435f-af0b-eecb8d4af9c2
                          meta:
                            extension:
                              - extension:
                                  - url: clientname
                                    valueString: data_uploader
                                  - url: person
                                    valueReference:
                                      reference: Person/bea178a0-6ea4-4b47-99af-e4021bba8f99
                                url: "https://commure.com/fhir/provenance/StructureDefinition/creator-structure-map"
                            lastUpdated: "2020-10-21T16:16:33.711007+00:00"
                            versionId: bd250ec1-2d24-49ec-9c52-5c7573d7b520
                          name:
                            - family: Patient
                              given:
                                - Test
                          resourceType: Patient
                        search:
                          mode: include
                    link:
                      - relation: self
                        url: Encounter?status=in-progress&_include=Encounter%3Asubject&subject=cca00185-bc2e-435f-af0b-eecb8d4af9c2&_count=50
                    resourceType: Bundle
                    type: searchset
  /api/v1/r4/QuestionnaireResponse/extract:
    post:
      summary: 4. The QuestionnaireResponse is used to create a Coverage resource with $extract
      description: "With a completed `QuestionnaireResponse`, we’ll invoke the extended operation, `QuestionnaireResponse/$extract`. This operation uses the answers in the `QuestionnaireResponse` to generate the resource(s) specified by the original `Questionnaire`.\n\nWhile the questions in the `Questionnaire` for this scenario were designed to correspond simply with the fields of a `Coverage` resource, a generic mechanism for extracting structured data while maintaining the flexibility and control possible with `Questionnaire` is significantly more compelling in practice.\n\nNote that as a final step, the client application must submit the transaction `Bundle` that this operation returns to store the extracted `Coverage` resource."
      operationId: 4TheQuestionnaireResponseIsUsedToCreateACoverageResourceWithExtract
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                parameter:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        example: questionnaire-response
                      resource:
                        type: object
                        properties:
                          item:
                            type: array
                            items:
                              type: object
                              properties:
                                item:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      answer:
                                        type: array
                                        items:
                                          type: object
                                          properties:
                                            valueString:
                                              type: string
                                              example: 123-456-789
                                        example:
                                          - valueString: 123-456-789
                                      definition:
                                        type: string
                                        example: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                      linkId:
                                        type: string
                                        example: subscriber-id
                                      text:
                                        type: string
                                        example: Insurance Id Number
                                  example:
                                    - answer:
                                        - valueString: 123-456-789
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                      linkId: subscriber-id
                                      text: Insurance Id Number
                                    - answer:
                                        - valueReference:
                                            reference: "Organization/{{organization-id}}"
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                      linkId: payor
                                      text: Insurance company name
                                    - answer:
                                        - valueCoding:
                                            code: active
                                            system: "http://hl7.org/fhir/ValueSet/fm-status"
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                      linkId: status
                                      text: Status of coverage
                                    - answer:
                                        - valueString: "Patient/{{patient-id}}"
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                      linkId: beneficiary-reference
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                      linkId: coverage-id
                                linkId:
                                  type: string
                                  example: coverage
                            example:
                              - item:
                                  - answer:
                                      - valueString: 123-456-789
                                    definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                    linkId: subscriber-id
                                    text: Insurance Id Number
                                  - answer:
                                      - valueReference:
                                          reference: "Organization/{{organization-id}}"
                                    definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                    linkId: payor
                                    text: Insurance company name
                                  - answer:
                                      - valueCoding:
                                          code: active
                                          system: "http://hl7.org/fhir/ValueSet/fm-status"
                                    definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                    linkId: status
                                    text: Status of coverage
                                  - answer:
                                      - valueString: "Patient/{{patient-id}}"
                                    definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                    linkId: beneficiary-reference
                                  - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                    linkId: coverage-id
                                linkId: coverage
                          questionnaire:
                            type: string
                            example: "https://commure.com/fhir/Questionnaire/insurance|1.0.0"
                          resourceType:
                            type: string
                            example: QuestionnaireResponse
                          status:
                            type: string
                            example: in-progress
                          subject:
                            type: object
                            properties:
                              reference:
                                type: string
                                example: "Patient/{{patient-id}}"
                  example:
                    - name: questionnaire-response
                      resource:
                        item:
                          - item:
                              - answer:
                                  - valueString: 123-456-789
                                definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                linkId: subscriber-id
                                text: Insurance Id Number
                              - answer:
                                  - valueReference:
                                      reference: "Organization/{{organization-id}}"
                                definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                linkId: payor
                                text: Insurance company name
                              - answer:
                                  - valueCoding:
                                      code: active
                                      system: "http://hl7.org/fhir/ValueSet/fm-status"
                                definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                linkId: status
                                text: Status of coverage
                              - answer:
                                  - valueString: "Patient/{{patient-id}}"
                                definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                linkId: beneficiary-reference
                              - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                linkId: coverage-id
                            linkId: coverage
                        questionnaire: "https://commure.com/fhir/Questionnaire/insurance|1.0.0"
                        resourceType: QuestionnaireResponse
                        status: in-progress
                        subject:
                          reference: "Patient/{{patient-id}}"
                resourceType:
                  type: string
                  example: Parameters
            example:
              parameter:
                - name: questionnaire-response
                  resource:
                    item:
                      - item:
                          - answer:
                              - valueString: 123-456-789
                            definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                            linkId: subscriber-id
                            text: Insurance Id Number
                          - answer:
                              - valueReference:
                                  reference: "Organization/{{organization-id}}"
                            definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                            linkId: payor
                            text: Insurance company name
                          - answer:
                              - valueCoding:
                                  code: active
                                  system: "http://hl7.org/fhir/ValueSet/fm-status"
                            definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                            linkId: status
                            text: Status of coverage
                          - answer:
                              - valueString: "Patient/{{patient-id}}"
                            definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                            linkId: beneficiary-reference
                          - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                            linkId: coverage-id
                        linkId: coverage
                    questionnaire: "https://commure.com/fhir/Questionnaire/insurance|1.0.0"
                    resourceType: QuestionnaireResponse
                    status: in-progress
                    subject:
                      reference: "Patient/{{patient-id}}"
              resourceType: Parameters
      responses:
        "200":
          description: 4. The QuestionnaireResponse is used to create a Coverage resource with $extract
          headers:
            Connection:
              schema:
                type: string
                example: keep-alive
            Content-Encoding:
              schema:
                type: string
                example: gzip
            Content-Length:
              schema:
                type: string
                example: "1809"
            Date:
              schema:
                type: string
                example: "Wed, 21 Oct 2020 16:16:33 GMT"
            P3P:
              schema:
                type: string
                example: "CP=\"This is not a P3P policy.\""
            Server:
              schema:
                type: string
                example: nginx/1.17.10
            Strict-Transport-Security:
              schema:
                type: string
                example: max-age=15724800; includeSubDomains
            X-Correlation-ID:
              schema:
                type: string
                example: 37e2ad5d64854d6bcdd5b053ba51402e
            X-Request-ID:
              schema:
                type: string
                example: 37e2ad5d64854d6bcdd5b053ba51402e
          content:
            application/json:
              schema:
                type: object
                properties:
                  parameter:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          example: questionnaire-response
                        resource:
                          type: object
                          properties:
                            item:
                              type: array
                              items:
                                type: object
                                properties:
                                  item:
                                    type: array
                                    items:
                                      type: object
                                      properties:
                                        answer:
                                          type: array
                                          items:
                                            type: object
                                            properties:
                                              valueString:
                                                type: string
                                                example: 123-456-789
                                          example:
                                            - valueString: 123-456-789
                                        definition:
                                          type: string
                                          example: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                        linkId:
                                          type: string
                                          example: subscriber-id
                                        text:
                                          type: string
                                          example: Insurance Id Number
                                    example:
                                      - answer:
                                          - valueString: 123-456-789
                                        definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                        linkId: subscriber-id
                                        text: Insurance Id Number
                                      - answer:
                                          - valueReference:
                                              reference: "Organization/{{organization-id}}"
                                        definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                        linkId: payor
                                        text: Insurance company name
                                      - answer:
                                          - valueCoding:
                                              code: active
                                              system: "http://hl7.org/fhir/ValueSet/fm-status"
                                        definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                        linkId: status
                                        text: Status of coverage
                                      - answer:
                                          - valueString: "Patient/{{patient-id}}"
                                        definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                        linkId: beneficiary-reference
                                      - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                        linkId: coverage-id
                                  linkId:
                                    type: string
                                    example: coverage
                              example:
                                - item:
                                    - answer:
                                        - valueString: 123-456-789
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                      linkId: subscriber-id
                                      text: Insurance Id Number
                                    - answer:
                                        - valueReference:
                                            reference: "Organization/{{organization-id}}"
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                      linkId: payor
                                      text: Insurance company name
                                    - answer:
                                        - valueCoding:
                                            code: active
                                            system: "http://hl7.org/fhir/ValueSet/fm-status"
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                      linkId: status
                                      text: Status of coverage
                                    - answer:
                                        - valueString: "Patient/{{patient-id}}"
                                      definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                      linkId: beneficiary-reference
                                    - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                      linkId: coverage-id
                                  linkId: coverage
                            questionnaire:
                              type: string
                              example: "https://commure.com/fhir/Questionnaire/insurance|1.0.0"
                            resourceType:
                              type: string
                              example: QuestionnaireResponse
                            status:
                              type: string
                              example: in-progress
                            subject:
                              type: object
                              properties:
                                reference:
                                  type: string
                                  example: "Patient/{{patient-id}}"
                    example:
                      - name: questionnaire-response
                        resource:
                          item:
                            - item:
                                - answer:
                                    - valueString: 123-456-789
                                  definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                  linkId: subscriber-id
                                  text: Insurance Id Number
                                - answer:
                                    - valueReference:
                                        reference: "Organization/{{organization-id}}"
                                  definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                  linkId: payor
                                  text: Insurance company name
                                - answer:
                                    - valueCoding:
                                        code: active
                                        system: "http://hl7.org/fhir/ValueSet/fm-status"
                                  definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                  linkId: status
                                  text: Status of coverage
                                - answer:
                                    - valueString: "Patient/{{patient-id}}"
                                  definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                  linkId: beneficiary-reference
                                - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                  linkId: coverage-id
                              linkId: coverage
                          questionnaire: "https://commure.com/fhir/Questionnaire/insurance|1.0.0"
                          resourceType: QuestionnaireResponse
                          status: in-progress
                          subject:
                            reference: "Patient/{{patient-id}}"
                  resourceType:
                    type: string
                    example: Parameters
              examples:
                4. The QuestionnaireResponse is used to create a Coverage resource with $extract:
                  value:
                    parameter:
                      - name: questionnaire-response
                        resource:
                          item:
                            - item:
                                - answer:
                                    - valueString: 123-456-789
                                  definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.subscriberId"
                                  linkId: subscriber-id
                                  text: Insurance Id Number
                                - answer:
                                    - valueReference:
                                        reference: "Organization/{{organization-id}}"
                                  definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.payor"
                                  linkId: payor
                                  text: Insurance company name
                                - answer:
                                    - valueCoding:
                                        code: active
                                        system: "http://hl7.org/fhir/ValueSet/fm-status"
                                  definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.status"
                                  linkId: status
                                  text: Status of coverage
                                - answer:
                                    - valueString: "Patient/{{patient-id}}"
                                  definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.beneficiary.reference"
                                  linkId: beneficiary-reference
                                - definition: "http://hl7.org/fhir/StructureDefinition/Coverage#Coverage.id"
                                  linkId: coverage-id
                              linkId: coverage
                          questionnaire: "https://commure.com/fhir/Questionnaire/insurance|1.0.0"
                          resourceType: QuestionnaireResponse
                          status: in-progress
                          subject:
                            reference: "Patient/{{patient-id}}"
                    resourceType: Parameters
  /v1/r4/Patient:
    get:
      summary: 2. The provider finds the patient with a partial match on family and given name
      description: "A common starting point for many workflows is the need to find the appropriate Patient resource. In this scenario, the Patient resource will serve as the subject of the `QuestionnaireResponse` that the provider will be completing.\n\nIf the provider needs to search for the patient, searching by the identifier is the most performant option, but requires an exact match to yield results. Alternatively, the patient search parameters include many options that are less restrictive. The request here shows how a patient may be found with a partial match on family and given names."
      operationId: 2TheProviderFindsThePatientWithAPartialMatchOnFamilyAndGivenName
      parameters:
        - name: family
          in: query
          schema:
            type: string
            example: val
        - name: given
          in: query
          schema:
            type: string
            example: g
      responses:
        "200":
          description: ""
tags: []